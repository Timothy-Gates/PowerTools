<!DOCTYPE html>
<html>
<!-- start right frame -->
<head>
    <title>ADA Troubleshooter</title>
    ~[wc:commonscripts]
    <link href="/images/css/screen.css" rel="stylesheet" media="screen">
    <link href="/images/css/print.css" rel="stylesheet" media="print">
    <script>
        var powerTools = powerTools || {
                    adaTroubleshooter: {
                        studentCompletionCount: 0,
                        dateEntered: '06/09/2015',
                        studentId: '~(id)',
                        studentFrn: '~(frn)',
                        studentInfo: {},
                        fteInfo: {},
                        dateInfo: {},
                        reEnrollInfo: {},
                        currentDate: {day: 1,month: 1, year: 1990},
                        conversionInfo: {},
                        /* Retrieve Student info */
                        retrieveStudent: function(){
                            $j.getJSON('/admin/tech/PowerTools/json/adaTroubleshooter/studentinfo.json?id=' +
                                    powerTools.adaTroubleshooter.studentId + '&dateEntered=' +
                                    powerTools.adaTroubleshooter.dateEntered, function(result){
                                powerTools.adaTroubleshooter.studentInfo = result;
                            }).done(function(){
                                powerTools.adaTroubleshooter.displayStudent();
                            });
                        },
                        /* Retrieve School info */
                        retrieveFte: function(){
                            $j.getJSON('/admin/tech/PowerTools/json/adaTroubleshooter/fteinfo.json?id=' +
                                    powerTools.adaTroubleshooter.studentId + '&dateentered=' +
                                    powerTools.adaTroubleshooter.dateEntered, function(result){
                                powerTools.adaTroubleshooter.fteInfo = result;
                            }).done(function(){
                                powerTools.adaTroubleshooter.displayFte();
                                powerTools.adaTroubleshooter.retrieveConversion();
                            });
                        },
                        /* Retrieve Attendance Conversion information with FTE ID and student FRN */
                        retrieveConversion: function(){
                            $j.getJSON('/admin/tech/PowerTools/json/adaTroubleshooter/conversionInfo.json?fteID=' +
                                    powerTools.adaTroubleshooter.fteInfo.fteid + '&modeCode=' +
                                    powerTools.adaTroubleshooter.fteInfo.conversionmodecode.toLowerCase(), function(result){
                                result.pop();
                                powerTools.adaTroubleshooter.conversionInfo = result;
                            }).done(function(){
                                powerTools.adaTroubleshooter.displayConversion();
                            });
                        },
                        /*Retrieve Calendar Date info, default to today*/
                        retrieveCalendar: function(){
                            /*                  $j.getJSON('/admin/tech/PowerTools/json/adaTroubleshooter/calendarinfo.json?date=' +
                             powerTools.adaTroubleshooter.dateEntered, function(result){
                             result.pop();
                             powerTools.adaTroubleshooter.dateInfo = result;
                             });*/
                        },
                        <!--Build Calendar and set it to current Month -->
                        buildCalendar: function(){
                            var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                            var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                            var daysObj = [];
                            var day = 0;
                            $j('#calendarData').append(
                                    '<table class="grid" id="calendar" style="max-width:1200px"><th colspan="7" align=""center"><div style="width: 53%; float: left; text-align: right;">' +
                                    months[powerTools.adaTroubleshooter.currentDate.month-1] + powerTools.adaTroubleshooter.currentDate.year + '</div><div style="width: 47%; float: left; text-align: right;"><input type="text" class="psDateWidget" /></div></th><tbody>'+
                                    '<tr><td>Sun</td><td>Mon</td><td>Tues</td><td>Wed</td><td>Thurs</td><td>Fri</td><td>Sat</td>'
                            );
                            for(var i=0; i<5; i++){
                                $j('#calendar > tbody:last-child').append(
                                        '</tr><tr>'
                                );
                                daysObj.push([]);
                                for(var j=0;j<7;j++){
                                    day++;
                                    daysObj[i].push({day:day});
                                    $j('#calendar > tbody:last-child').append(
                                            '<td class="square">' + daysObj[i][j].day + '</td>'
                                    );

                                }
                            }
                            $j('#calendarData > tbody:last-child').append(
                                    '</tr></tbody></table>'
                            );

                        },
                        /* Display Student Info */
                        displayStudent: function(){
                            $j('#studentData').append(
                                    '<table class="grid" id="studentTable"><th colspan="2" align="center">Student Information</th>'+
                                    '<tr><td>Entry Date:</td><td>' + powerTools.adaTroubleshooter.studentInfo.entrydate + '</td></tr>'+
                                    '<tr><td>Exit Date:</td><td>' + powerTools.adaTroubleshooter.studentInfo.exitdate + '</td></tr>'+
                                    '<tr><td>Membership Share:</td><td>' + powerTools.adaTroubleshooter.studentInfo.membershipshare + '</td></tr>'+
                                    '<tr><td>Track:</td><td>' + powerTools.adaTroubleshooter.studentInfo.track + '</td></tr>'+
                                    '</table>'
                            );
                        },
                        /* Display Conversion Info */
                        displayConversion: function(){
                            $j('#conversionData').append(
                                    '<table class="grid" id="conversionTable"><th colspan="2" align="center">Conversion Information</th>'+
                                    '<tr><td align="center">Periods\\Intervals\\Time in Attendance</td><td align="center">Attendance Points Awarded</td></tr><tbody id="conversionBody"></tbody></table>'
                            );
                            for(var i=0; i < powerTools.adaTroubleshooter.conversionInfo.length; i++){
                                $j('#conversionBody').append(
                                        '<tr><td align="center">' + powerTools.adaTroubleshooter.conversionInfo[i].periodLabel + '</td>' +
                                        '<td align="center">' + powerTools.adaTroubleshooter.conversionInfo[i].periodValue + '</td></tr>'
                                );
                            }
                        },
                        /* Display School Info */
                        displayFte: function(){
                            $j('#fteData').append(
                                    '<table class="grid" id="fteTable"><th colspan="2" align="center">FTE Information</th>'+
                                    '<tr><td>FTE Name:</td><td>' + powerTools.adaTroubleshooter.fteInfo.name + '</td></tr>'+
                                    '<tr><td>FTE Year ID:</td><td>' + powerTools.adaTroubleshooter.fteInfo.yearid + '</td></tr>'+
                                    '<tr><td>Attendance Mode:</td><td>' + powerTools.adaTroubleshooter.fteInfo.attmodecode + '</td></tr>'+
                                    '<tr><td>Attendance Conversion:</td><td>' + powerTools.adaTroubleshooter.fteInfo.conversionmodecode + '</td></tr>'+
                                    '</table>'
                            );
                        },
                    }
                };
        $j(document).ready(function(){
            powerTools.adaTroubleshooter.retrieveStudent();
            powerTools.adaTroubleshooter.retrieveFte();
            powerTools.adaTroubleshooter.buildCalendar();
        });

    </script>
    <style>
        .square {
            width: 14.28%;
            padding-bottom: 8.03%; /* = width for a 1:1 aspect ratio */
        }
    </style>
</head>
<body>
~[wc:admin_header_frame_css]
<!-- breadcrumb start -->
<a href="/admin/home.html" target="_top">~[text:psx.html.admin_students.honorroll.start_page]</a>
&gt; <a href="home.html?selectstudent=nosearch" target="_top">~[text:psx.html.admin_students.honorroll.student_selection]</a>
&gt;~[text:psx.html.admin_students.honorroll.honor_roll1]
<!-- breadcrumb end -->
~[wc:admin_navigation_frame_css] ~[wc:title_student_begin_css]ADA Troubleshooter~[wc:title_student_end_css]
<!-- start of content and bounding box -->
<div class="box-round">
    <div id="dateSelection">
        <table class="linkDescList">
            <tb><p><b>This utility will help to determine how Average Daily Attendance and Membership are calculated, should the attendance views
                be updated. If the data your are displaying on this page does not match the ADA/ADM reports, try <a href="/admin/reports_engine/report_w_param.html?ac=reports_get_using_ID;repo_ID=ATT_RefreshPremierMembrDefaults">refreshing
                    the Premier Attendance Views Data</a>.
            </b></p></tb>
        </table>
    </div>
    <div id="error"></div>
    <div id="studentData"></div>
    <div id="fteData"></div>
    <div id="conversionData"></div>
    <div id="dayInformation"></div>
    <div id="calendarData" align="center"></div>
    <div id="prevEnrollmentData"></div>
    <div id="calendarLegend"></div>
</div>
<!-- end of content of bounding box -->
~[wc:admin_footer_frame_css]
</body>
</html>
<!-- end right frame -->

